{"version":3,"sources":["../../src/middlewares/verifySignup.js"],"names":["checkDuplicateUsernameOrEmail","req","res","next","User","findOne","username","body","user","status","json","message","email","checkRolesExist","roles","h","size","ROLES","includes"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEO,IAAMA,6BAA6B;AAAA,qFAAG,iBAAMC,GAAN,EAAWC,GAAX,EAAgBC,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACtBC,cAAKC,OAAL,CAAa;AAAEC,cAAAA,QAAQ,EAAEL,GAAG,CAACM,IAAJ,CAASD;AAArB,aAAb,CADsB;;AAAA;AACnCE,YAAAA,IADmC;;AAAA,iBAErCA,IAFqC;AAAA;AAAA;AAAA;;AAAA,6CAExBN,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAArB,CAFwB;;AAAA;AAAA;AAAA,mBAIrBP,cAAKC,OAAL,CAAa;AAAEO,cAAAA,KAAK,EAAEX,GAAG,CAACM,IAAJ,CAASK;AAAlB,aAAb,CAJqB;;AAAA;AAInCA,YAAAA,KAJmC;;AAAA,iBAKrCA,KALqC;AAAA;AAAA;AAAA;;AAAA,6CAKvBV,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,cAAAA,OAAO,EAAE;AAAX,aAArB,CALuB;;AAAA;AAOzCR,YAAAA,IAAI;;AAPqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAA7BH,6BAA6B;AAAA;AAAA;AAAA,GAAnC;;;;AAUA,IAAMa,eAAe,GAAG,SAAlBA,eAAkB,CAACZ,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC/C,MAAIF,GAAG,CAACM,IAAJ,CAASO,KAAb,EAAoB;AAChB,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGd,GAAG,CAACM,IAAJ,CAASO,KAAT,CAAeE,IAAnC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,UAAI,CAACE,YAAMC,QAAN,CAAejB,GAAG,CAACM,IAAJ,CAASO,KAAT,CAAeC,CAAf,CAAf,CAAL,EAAwC;AACpC,eAAOb,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAAEC,UAAAA,OAAO,gBAASV,GAAG,CAACM,IAAJ,CAASO,KAAT,CAAeC,CAAf,CAAT;AAAT,SAArB,CAAP;AACH;AACJ;AACJ;;AACDZ,EAAAA,IAAI;AACP,CATM","sourcesContent":["import { ROLES } from '../models/Role'\r\nimport User from '../models/User'\r\n\r\nexport const checkDuplicateUsernameOrEmail = async(req, res, next) => {\r\n    const user = await User.findOne({ username: req.body.username });\r\n    if (user) return res.status(400).json({ message: 'El usuario ya existe' });\r\n\r\n    const email = await User.findOne({ email: req.body.email });\r\n    if (email) return res.status(400).json({ message: 'El email ya existe' });\r\n\r\n    next();\r\n}\r\n\r\nexport const checkRolesExist = (req, res, next) => {\r\n    if (req.body.roles) {\r\n        for (let h = 0; h < req.body.roles.size; h++) {\r\n            if (!ROLES.includes(req.body.roles[h])) {\r\n                return res.status(400).json({ message: `Rol ${req.body.roles[h]} no existe` });\r\n            }\r\n        }\r\n    }\r\n    next();\r\n}"],"file":"verifySignup.js"}