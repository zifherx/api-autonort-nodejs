{"version":3,"sources":["../../src/controllers/jefaturaVentas.controller.js"],"names":["jefaturaCtrl","getAll","req","res","JefaturaVentas","find","populate","query","length","json","status","message","console","error","createOne","body","name","email","area","marca","sucursal","createdBy","newObj","User","username","$in","userFound","map","a","_id","save","updateById","jefaturaId","params","findByIdAndUpdate","deleteById","findByIdAndDelete","obtenerJefexSucursal","findOne","select","asesor","log"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,YAAY,GAAG,EAArB;;AAEAA,YAAY,CAACC,MAAb;AAAA,qFAAsB,iBAAMC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEMC,wBAAeC,IAAf,GAAsBC,QAAtB,CAA+B,WAA/B,EAA4C,MAA5C,CAFN;;AAAA;AAERC,YAAAA,KAFQ;;AAAA,kBAIVA,KAAK,CAACC,MAAN,GAAe,CAJL;AAAA;AAAA;AAAA;;AAKVL,YAAAA,GAAG,CAACM,IAAJ,CAASF,KAAT;AALU;AAAA;;AAAA;AAAA,6CAOHJ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CAPG;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUdC,YAAAA,OAAO,CAACC,KAAR;AAVc,6CAWPV,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,YAAIA;AAAf,aAArB,CAXO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAAA;AAAA;AAAA;AAAA;;AAeAX,YAAY,CAACc,SAAb;AAAA,sFAAyB,kBAAMZ,GAAN,EAAWC,GAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEqCD,GAAG,CAACa,IAFzC,EAEbC,IAFa,aAEbA,IAFa,EAEPC,KAFO,aAEPA,KAFO,EAEAC,IAFA,aAEAA,IAFA,EAEMC,KAFN,aAEMA,KAFN,EAEaC,QAFb,aAEaA,QAFb,EAEuBC,SAFvB,aAEuBA,SAFvB;AAAA;AAMXC,YAAAA,MANW,GAMF,IAAIlB,uBAAJ,CAAmB;AAAEY,cAAAA,IAAI,EAAJA,IAAF;AAAQC,cAAAA,KAAK,EAALA,KAAR;AAAeC,cAAAA,IAAI,EAAJA,IAAf;AAAqBC,cAAAA,KAAK,EAALA,KAArB;AAA4BC,cAAAA,QAAQ,EAARA;AAA5B,aAAnB,CANE;AAAA;AAAA,mBAQOG,cAAKlB,IAAL,CAAU;AAAEmB,cAAAA,QAAQ,EAAE;AAAEC,gBAAAA,GAAG,EAAEJ;AAAP;AAAZ,aAAV,CARP;;AAAA;AAQXK,YAAAA,SARW;AASjBJ,YAAAA,MAAM,CAACD,SAAP,GAAmBK,SAAS,CAACC,GAAV,CAAc,UAAAC,CAAC;AAAA,qBAAIA,CAAC,CAACC,GAAN;AAAA,aAAf,CAAnB;AATiB;AAAA,mBAWGP,MAAM,CAACQ,IAAP,EAXH;;AAAA;AAWXvB,YAAAA,KAXW;;AAYjB,gBAAIA,KAAJ,EAAW;AACPJ,cAAAA,GAAG,CAACM,IAAJ,CAAS;AAAEE,gBAAAA,OAAO,EAAE;AAAX,eAAT;AACH;;AAdgB;AAAA;;AAAA;AAAA;AAAA;AAgBjBC,YAAAA,OAAO,CAACC,KAAR;AAhBiB,8CAiBVV,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB,CAjBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAzB;;AAAA;AAAA;AAAA;AAAA;;AAqBAX,YAAY,CAAC+B,UAAb;AAAA,sFAA0B,kBAAM7B,GAAN,EAAWC,GAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AACd6B,YAAAA,UADc,GACC9B,GAAG,CAAC+B,MADL,CACdD,UADc;AAAA,yBAEyB9B,GAAG,CAACa,IAF7B,EAEdC,IAFc,cAEdA,IAFc,EAERC,KAFQ,cAERA,KAFQ,EAEDC,IAFC,cAEDA,IAFC,EAEKC,KAFL,cAEKA,KAFL,EAEYC,QAFZ,cAEYA,QAFZ;AAAA;AAAA;AAAA,mBAKEhB,wBAAe8B,iBAAf,CAAiCF,UAAjC,EAA6C;AAC7DhB,cAAAA,IAAI,EAAJA,IAD6D;AAE7DC,cAAAA,KAAK,EAALA,KAF6D;AAG7DC,cAAAA,IAAI,EAAJA,IAH6D;AAI7DC,cAAAA,KAAK,EAALA,KAJ6D;AAK7DC,cAAAA,QAAQ,EAARA;AAL6D,aAA7C,CALF;;AAAA;AAKZb,YAAAA,KALY;;AAYlB,gBAAIA,KAAJ,EAAW;AACPJ,cAAAA,GAAG,CAACM,IAAJ,CAAS;AAAEE,gBAAAA,OAAO,EAAE;AAAX,eAAT;AACH,aAFD,MAEO;AACHR,cAAAA,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,gBAAAA,OAAO,EAAE;AAAX,eAArB;AACH;;AAhBiB;AAAA;;AAAA;AAAA;AAAA;AAAA,8CAkBXR,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB,CAlBW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAAA;AAAA;AAAA;AAAA;;AAsBAX,YAAY,CAACmC,UAAb;AAAA,sFAA0B,kBAAMjC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AACd6B,YAAAA,UADc,GACC9B,GAAG,CAAC+B,MADL,CACdD,UADc;AAAA;AAAA;AAAA,mBAIE5B,wBAAegC,iBAAf,CAAiCJ,UAAjC,CAJF;;AAAA;AAIZzB,YAAAA,KAJY;;AAAA,iBAKdA,KALc;AAAA;AAAA;AAAA;;AAMdJ,YAAAA,GAAG,CAACM,IAAJ,CAAS;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAAT;AANc;AAAA;;AAAA;AAAA,8CAQPR,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CARO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,8CAWXR,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB,CAXW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAAA;AAAA;AAAA;AAAA;;AAeAX,YAAY,CAACqC,oBAAb;AAAA,sFAAoC,kBAAMnC,GAAN,EAAWC,GAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,yBACED,GAAG,CAACa,IADN,EACxBK,QADwB,cACxBA,QADwB,EACdF,IADc,cACdA,IADc,EACRC,KADQ,cACRA,KADQ;AAAA;AAAA;AAAA,mBAIRf,wBAAekC,OAAf,CAAuB;AAAElB,cAAAA,QAAQ,EAAEA,QAAZ;AAAsBF,cAAAA,IAAI,EAAEA,IAA5B;AAAkCC,cAAAA,KAAK,EAAEA,KAAzC;AAAgDT,cAAAA,MAAM,EAAE;AAAxD,aAAvB,EAAuF6B,MAAvF,CAA8F,YAA9F,CAJQ;;AAAA;AAItBhC,YAAAA,KAJsB;;AAAA,iBAMxBA,KANwB;AAAA;AAAA;AAAA;;AAOxBJ,YAAAA,GAAG,CAACM,IAAJ,CAAS;AAAE+B,cAAAA,MAAM,EAAEjC;AAAV,aAAT;AAPwB;AAAA;;AAAA;AAAA,8CASjBJ,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CATiB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAY5BC,YAAAA,OAAO,CAAC6B,GAAR;AAZ4B,8CAarBtC,GAAG,CAACO,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB,CAbqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAApC;;AAAA;AAAA;AAAA;AAAA;;eAiBeX,Y","sourcesContent":["import JefaturaVentas from \"../models/JefaturaVentas\";\r\nimport User from \"../models/User\";\r\n\r\nconst jefaturaCtrl = {};\r\n\r\njefaturaCtrl.getAll = async(req, res) => {\r\n    try {\r\n        const query = await JefaturaVentas.find().populate('createdBy', 'name');\r\n\r\n        if (query.length > 0) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen jefes' })\r\n        }\r\n    } catch (err) {\r\n        console.error(err)\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\njefaturaCtrl.createOne = async(req, res) => {\r\n\r\n    const { name, email, area, marca, sucursal, createdBy } = req.body;\r\n\r\n    try {\r\n\r\n        const newObj = new JefaturaVentas({ name, email, area, marca, sucursal });\r\n\r\n        const userFound = await User.find({ username: { $in: createdBy } })\r\n        newObj.createdBy = userFound.map(a => a._id)\r\n\r\n        const query = await newObj.save();\r\n        if (query) {\r\n            res.json({ message: 'Jefe creada con éxito' });\r\n        }\r\n    } catch (err) {\r\n        console.error(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\njefaturaCtrl.updateById = async(req, res) => {\r\n    const { jefaturaId } = req.params;\r\n    const { name, email, area, marca, sucursal } = req.body;\r\n\r\n    try {\r\n        const query = await JefaturaVentas.findByIdAndUpdate(jefaturaId, {\r\n            name,\r\n            email,\r\n            area,\r\n            marca,\r\n            sucursal\r\n        });\r\n        if (query) {\r\n            res.json({ message: 'Jefe actualizado con éxito' });\r\n        } else {\r\n            res.status(404).json({ message: 'No existe Jefe a actualizar' });\r\n        }\r\n    } catch (err) {\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\njefaturaCtrl.deleteById = async(req, res) => {\r\n    const { jefaturaId } = req.params;\r\n\r\n    try {\r\n        const query = await JefaturaVentas.findByIdAndDelete(jefaturaId);\r\n        if (query) {\r\n            res.json({ message: 'Jefe eliminado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Jefe a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\njefaturaCtrl.obtenerJefexSucursal = async(req, res) => {\r\n    const { sucursal, area, marca } = req.body\r\n\r\n    try {\r\n        const query = await JefaturaVentas.findOne({ sucursal: sucursal, area: area, marca: marca, status: true }).select('name email');\r\n\r\n        if (query) {\r\n            res.json({ asesor: query })\r\n        } else {\r\n            return res.status(404).json({ message: 'No se encontraron asesores' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport default jefaturaCtrl;"],"file":"jefaturaVentas.controller.js"}