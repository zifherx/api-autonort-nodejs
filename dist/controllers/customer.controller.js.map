{"version":3,"sources":["../../src/controllers/customer.controller.js"],"names":["createCustomer","req","res","body","name","typeDocument","document","representanteLegal","documentoRepresentante","cellphone","email","address","empleado","newCustomer","Customer","User","find","username","$in","foundEmployee","map","em","_id","save","customerSaved","json","message","console","log","status","getCustomers","sort","customers","length","getCustomerById","customerId","params","findById","customer","messsage","getCustomerByDni","customerDni","findOne","updateCustomerById","findByIdAndUpdate","updateCustomer","deleteCustomerById","findByIdAndDelete","deletedCustomer"],"mappings":"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","sourcesContent":["import Customer from '../models/Customer'\r\nimport User from '../models/User';\r\n\r\nexport const createCustomer = async(req, res) => {\r\n    const {\r\n        name,\r\n        typeDocument,\r\n        document,\r\n        representanteLegal,\r\n        documentoRepresentante,\r\n        cellphone,\r\n        email,\r\n        address,\r\n        empleado\r\n    } = req.body;\r\n    try {\r\n        const newCustomer = new Customer({\r\n            name,\r\n            typeDocument,\r\n            document,\r\n            representanteLegal,\r\n            documentoRepresentante,\r\n            cellphone,\r\n            email,\r\n            address\r\n        });\r\n        const foundEmployee = await User.find({ username: { $in: empleado } });\r\n        newCustomer.empleado = foundEmployee.map(em => em._id)\r\n        const customerSaved = await newCustomer.save();\r\n        if (customerSaved) {\r\n            res.json({ message: 'Cliente creado con éxito' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getCustomers = async(req, res) => {\r\n    try {\r\n        const customers = await Customer.find().sort({ name: 'asc' });\r\n        if (customers.length > 0) {\r\n            res.json(customers);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Clientes' });\r\n        }\r\n\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getCustomerById = async(req, res) => {\r\n    const { customerId } = req.params;\r\n    try {\r\n        const customer = await Customer.findById(customerId);\r\n        if (customer) {\r\n            res.json(customer);\r\n        } else {\r\n            return res.status(404).json({ messsage: 'No existe cliente' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getCustomerByDni = async(req, res) => {\r\n    const { customerDni } = req.body;\r\n    try {\r\n        const customer = await Customer.findOne({ document: customerDni });\r\n        if (customer) {\r\n            res.json(customer);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe el DNI en el Sistema' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const updateCustomerById = async(req, res) => {\r\n    const { customerId } = req.params;\r\n    const {\r\n        name,\r\n        typeDocument,\r\n        document,\r\n        representanteLegal,\r\n        documentoRepresentante,\r\n        cellphone,\r\n        email,\r\n        address\r\n    } = req.body;\r\n    try {\r\n        const updateCustomer = await Customer.findByIdAndUpdate(customerId, {\r\n            name,\r\n            typeDocument,\r\n            document,\r\n            representanteLegal,\r\n            documentoRepresentante,\r\n            cellphone,\r\n            email,\r\n            address\r\n        });\r\n        if (updateCustomer) {\r\n            res.json({ message: 'Cliente actualizado con éxito' });\r\n        } else {\r\n            res.status(404).json({ messsage: 'No existe Cliente a actualizar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const deleteCustomerById = async(req, res) => {\r\n    const { customerId } = req.params;\r\n    try {\r\n        const deletedCustomer = await Customer.findByIdAndDelete(customerId);\r\n        if (deletedCustomer) {\r\n            res.json({ message: 'Cliente eliminado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ messsage: 'No existe Cliente a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}"],"file":"customer.controller.js"}