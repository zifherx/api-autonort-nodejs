{"version":3,"file":"submoduloG.controller.js","names":["submoduloController","getAll","req","res","SubmoduloG","find","sort","name","populate","path","select","query","length","json","total","all","status","message","console","log","getOneById","subModuloId","params","findById","one","getAllByActivos","estado","total_active","all_active","createOne","body","moduloG","obj","ModuloG","findOne","moduloFound","_id","save","updateOneById","findByIdAndUpdate","deleteOneById","findByIdAndDelete","getAllActiveByModulo"],"sources":["../../src/controllers/submoduloG.controller.js"],"sourcesContent":["import ModuloG from \"../models/ModuloG\";\r\nimport SubmoduloG from \"../models/SubmoduloG\";\r\n\r\nconst submoduloController = {};\r\n\r\nsubmoduloController.getAll = async(req, res) => {\r\n    try {\r\n        const query = await SubmoduloG.find()\r\n        .sort({ name: 1 })\r\n        .populate({\r\n            path: 'moduloG',\r\n            select: 'name menuG icon',\r\n            populate: {\r\n                path: 'menuG',\r\n                select: 'name icon'\r\n            }\r\n        });\r\n\r\n        if (query.length > 0) {\r\n            res.json({total: query.length, all: query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen submódulos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nsubmoduloController.getOneById = async(req, res) => {\r\n    const { subModuloId } = req.params;\r\n    try {\r\n        const query = await SubmoduloG.findById(subModuloId)\r\n        .populate({\r\n            path: 'moduloG',\r\n            select: 'name menuG icon',\r\n            populate: {\r\n                path: 'menuG',\r\n                select: 'name icon'\r\n            }\r\n        });\r\n\r\n        if (query) {\r\n            res.json({one: query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe submódulo' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err)\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nsubmoduloController.getAllByActivos = async(req, res) => {\r\n    try {\r\n        const query = await SubmoduloG.find({ estado: true })\r\n        .sort({ name: 1 })\r\n        .populate({\r\n            path: 'moduloG',\r\n            select: 'name menuG icon',\r\n            populate: {\r\n                path: 'menuG',\r\n                select: 'name icon'\r\n            }\r\n        });\r\n\r\n        if (query.length > 0) {\r\n            res.json({total_active: query.length, all_active: query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen submódulos activos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nsubmoduloController.createOne = async(req, res) => {\r\n    const { moduloG, name, estado } = req.body;\r\n    try {\r\n        const obj = new SubmoduloG({ name, estado });\r\n\r\n        const moduloFound = await ModuloG.findOne({name: moduloG});\r\n        if(!moduloFound) return res.status(404).json({message: `No se encontró módulo ${moduloG}`})\r\n        obj.moduloG = moduloFound._id;\r\n\r\n        const query = await obj.save();\r\n\r\n        if (query) {\r\n            res.json({ message: 'Submódulo creado con éxito' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err)\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nsubmoduloController.updateOneById = async(req, res) => {\r\n    const { moduloG, name, estado } = req.body;\r\n    const { subModuloId } = req.params;\r\n    try {\r\n        const moduloFound = await ModuloG.findOne({name: moduloG});\r\n        if(!moduloFound) return res.status(404).json({message: `No se encontró módulo ${moduloG}`})\r\n        \r\n        const query = await SubmoduloG.findByIdAndUpdate(subModuloId, { \r\n                moduloG: moduloFound._id,\r\n                name,\r\n                estado \r\n            });\r\n\r\n        if (query) {\r\n            res.json({ message: 'Submódulo actualizado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe submódulo a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nsubmoduloController.deleteOneById = async(req, res) => {\r\n    const { subModuloId } = req.params;\r\n    try {\r\n        const query = await SubmoduloG.findByIdAndDelete(subModuloId);\r\n        if (query) {\r\n            res.json({ message: 'Submódulo eliminado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe submódulo a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nsubmoduloController.getAllActiveByModulo = async(req, res) => {\r\n    const {moduloG} = req.body;\r\n\r\n    try {\r\n        const moduloFound = await ModuloG.findOne({name: moduloG });\r\n        if(!moduloFound) return res.status(404).json({message: `Módulo ${moduloG} no encontrado`});\r\n\r\n        const query = await SubmoduloG.find({\r\n            moduloG: moduloFound._id,\r\n            estado: true\r\n        })\r\n        .sort({ name: 1 })\r\n        .populate({\r\n            path: 'moduloG',\r\n            select: 'name menuG icon',\r\n            populate: {\r\n                path: 'menuG',\r\n                select: 'name icon'\r\n            }\r\n        });\r\n\r\n        if(query.length > 0){\r\n            res.json({total_active: query.length, all_active: query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen submódulos activos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport default submoduloController;"],"mappings":"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"}