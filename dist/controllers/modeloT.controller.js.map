{"version":3,"sources":["../../src/controllers/modeloT.controller.js"],"names":["getAll","req","res","ModeloTasaciones","find","sort","name","populate","path","select","query","length","json","status","message","console","log","getModeloById","modeloId","params","findById","getModeloActivos","count","models","getModelosByMarca","marca","body","MarcaTasaciones","findOne","marcaFound","_id","createModelo","obj","save","updateModeloById","findByIdAndUpdate","deleteModeloById","findByIdAndDelete","countAll","countDocuments"],"mappings":"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","sourcesContent":["import MarcaTasaciones from \"../models/MarcaTasaciones\";\r\nimport ModeloTasaciones from \"../models/ModeloTasaciones\";\r\n\r\nexport const getAll = async(req, res) => {\r\n    try {\r\n        const query = await ModeloTasaciones.find()\r\n            .sort({ name: 'asc' })\r\n            .populate({ path: 'marca', select: 'name' })\r\n        if (query.length > 0) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Modelos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getModeloById = async(req, res) => {\r\n    const { modeloId } = req.params;\r\n    try {\r\n        const query = await ModeloTasaciones.findById(modeloId)\r\n            .populate({ path: 'marca', select: 'name' })\r\n        if (query) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe la Modelo' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err)\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getModeloActivos = async(req, res) => {\r\n    try {\r\n        const query = await ModeloTasaciones.find({ status: true })\r\n            .sort({ name: 'asc' })\r\n            .populate({ path: 'marca', select: 'name' });\r\n        if (query.length > 0) {\r\n            res.json({ count: query.length, models: query });\r\n        } else {\r\n            res.status(404).json({ message: 'No existen Modelos activos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const getModelosByMarca = async(req, res) => {\r\n    const { marca } = req.body;\r\n    try {\r\n        const marcaFound = await MarcaTasaciones.findOne({ name: marca });\r\n        if (!marcaFound) return res.status(404).json({ message: `La marca ${marca} no existe` });\r\n\r\n        const query = await ModeloTasaciones.find({ marca: marcaFound._id });\r\n\r\n        if (query.length > 0) {\r\n            res.json({ count: query.length, models: query });\r\n        } else {\r\n            return res.status(404).json({ message: `La marca ${marca} no tiene modelos creados` })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const createModelo = async(req, res) => {\r\n    const { marca, name, status } = req.body;\r\n    try {\r\n        const obj = new ModeloTasaciones({ name, status });\r\n\r\n        const marcaFound = await MarcaTasaciones.findOne({ name: marca });\r\n        if (!marcaFound) return res.status(404).json({ message: `No existe la Marca ${marca}` })\r\n        obj.marca = marcaFound._id;\r\n\r\n        const query = await obj.save();\r\n\r\n        if (query) {\r\n            res.json({ message: 'Modelo creado con éxito' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const updateModeloById = async(req, res) => {\r\n    const { name, status } = req.body;\r\n    const { modeloId } = req.params;\r\n    try {\r\n        const query = await ModeloTasaciones.findByIdAndUpdate(modeloId, {\r\n            name,\r\n            status\r\n        });\r\n\r\n        if (query) {\r\n            res.json({ message: 'Modelo actualizado con éxito' });\r\n        } else {\r\n            res.status(404).json({ message: 'No existe Modelo a actualizar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const deleteModeloById = async(req, res) => {\r\n    const { modeloId } = req.params;\r\n    try {\r\n        const query = await ModeloTasaciones.findByIdAndDelete(modeloId);\r\n        if (query) {\r\n            res.json({ message: 'Modelo eliminado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Modelo a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const countAll = async(req, res) => {\r\n    try {\r\n        const query = await ModeloTasaciones.countDocuments();\r\n        if (query >= 0) {\r\n            res.json({ count: query });\r\n        }\r\n    } catch (err) {\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}"],"file":"modeloT.controller.js"}