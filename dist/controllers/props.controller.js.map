{"version":3,"sources":["../../src/controllers/props.controller.js"],"names":["createProp","req","res","body","name","forCar","stock","precio","status","empleado","newProp","Props","User","find","username","$in","foundEmployee","map","em","_id","save","propSaved","json","message","console","log","getAll","sort","names","props","length","getAccesoriosActivos","query","total_active","all_active","getAccesorioById","propsId","params","findById","messsage","getAccesorioByAuto","modelo","total","all","updatePropById","findByIdAndUpdate","updateProp","deletePropById","findByIdAndDelete","deletedProp"],"mappings":"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","sourcesContent":["import Props from '../models/Props'\r\nimport User from '../models/User'\r\n\r\nexport const createProp = async(req, res) => {\r\n    const { name, forCar, stock, precio, status, empleado } = req.body;\r\n    try {\r\n        const newProp = new Props({ name, forCar, stock, precio, status });\r\n\r\n        const foundEmployee = await User.find({ username: { $in: empleado } });\r\n        newProp.empleado = foundEmployee.map(em => em._id);\r\n\r\n        const propSaved = await newProp.save();\r\n        if (propSaved) {\r\n            res.json({ message: 'Accesorio creado con éxito' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAll = async(req, res) => {\r\n    try {\r\n        const props = await Props.find().sort({ names: 'asc' });\r\n        if (props.length > 0) {\r\n            res.json(props);\r\n        } else {\r\n            res.status(404).json({ message: 'No existen Accesorios' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAccesoriosActivos = async(req, res) => {\r\n    try {\r\n        const query = await Props.find({ status: 'Activo' }).sort({ name: 1 });\r\n        if (query.length > 0) {\r\n            res.json({total_active: query.length, all_active:query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe accesorios activos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAccesorioById = async(req, res) => {\r\n    const { propsId } = req.params;\r\n    try {\r\n        const props = await Props.findById(propsId);\r\n        if (props) {\r\n            res.json(props);\r\n        } else {\r\n            return res.status(404).json({ messsage: 'No existe Accesorio' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAccesorioByAuto = async(req, res) => {\r\n    const { modelo } = req.body;\r\n    try {\r\n        const query = await Props.find({ forCar: modelo });\r\n\r\n        if (query.length > 0) {\r\n            res.json({total: query.length,all: query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe el accesorio' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const updatePropById = async(req, res) => {\r\n    const { propsId } = req.params;\r\n    const { name, forCar, stock, precio, status } = req.body;\r\n\r\n    try {\r\n        //const foundAuto = await Vehicle.find({ cod_tdp: { $in: auto } });\r\n\r\n        const updateProp = await Props.findByIdAndUpdate(propsId, { name, forCar, stock, precio, status });\r\n        if (updateProp) {\r\n            res.json({ message: 'Accesorio actualizado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ messsage: 'No existe Accesorio a actualizar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const deletePropById = async(req, res) => {\r\n    const { propsId } = req.params;\r\n    try {\r\n        const deletedProp = await Props.findByIdAndDelete(propsId);\r\n        if (deletedProp) {\r\n            res.json({ message: 'Accesorio eliminado con éxito' });\r\n        } else {\r\n            res.status(404).json({ messsage: 'No existe Accesorio a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}"],"file":"props.controller.js"}