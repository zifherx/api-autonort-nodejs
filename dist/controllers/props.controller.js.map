{"version":3,"file":"props.controller.js","names":["createProp","req","res","body","name","forCar","stock","precio","status","empleado","newProp","Props","User","find","username","$in","foundEmployee","map","em","_id","save","propSaved","json","message","console","log","getAll","sort","names","props","length","getAccesoriosActivos","query","total_active","all_active","getAccesorioById","propsId","params","findById","messsage","getAccesorioByAuto","modelo","total","all","updatePropById","findByIdAndUpdate","updateProp","deletePropById","findByIdAndDelete","deletedProp"],"sources":["../../src/controllers/props.controller.js"],"sourcesContent":["import Props from '../models/Props'\r\nimport User from '../models/User'\r\n\r\nexport const createProp = async(req, res) => {\r\n    const { name, forCar, stock, precio, status, empleado } = req.body;\r\n    try {\r\n        const newProp = new Props({ name, forCar, stock, precio, status });\r\n\r\n        const foundEmployee = await User.find({ username: { $in: empleado } });\r\n        newProp.empleado = foundEmployee.map(em => em._id);\r\n\r\n        const propSaved = await newProp.save();\r\n        if (propSaved) {\r\n            res.json({ message: 'Accesorio creado con éxito' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAll = async(req, res) => {\r\n    try {\r\n        const props = await Props.find().sort({ names: 'asc' });\r\n        if (props.length > 0) {\r\n            res.json(props);\r\n        } else {\r\n            res.status(404).json({ message: 'No existen Accesorios' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAccesoriosActivos = async(req, res) => {\r\n    try {\r\n        const query = await Props.find({ status: 'Activo' }).sort({ name: 1 });\r\n        if (query.length > 0) {\r\n            res.json({total_active: query.length, all_active:query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe accesorios activos' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAccesorioById = async(req, res) => {\r\n    const { propsId } = req.params;\r\n    try {\r\n        const props = await Props.findById(propsId);\r\n        if (props) {\r\n            res.json(props);\r\n        } else {\r\n            return res.status(404).json({ messsage: 'No existe Accesorio' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getAccesorioByAuto = async(req, res) => {\r\n    const { modelo } = req.body;\r\n    try {\r\n        const query = await Props.find({ forCar: modelo });\r\n\r\n        if (query.length > 0) {\r\n            res.json({total: query.length,all: query});\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe el accesorio' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(503).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const updatePropById = async(req, res) => {\r\n    const { propsId } = req.params;\r\n    const { name, forCar, stock, precio, status } = req.body;\r\n\r\n    try {\r\n        //const foundAuto = await Vehicle.find({ cod_tdp: { $in: auto } });\r\n\r\n        const updateProp = await Props.findByIdAndUpdate(propsId, { name, forCar, stock, precio, status });\r\n        if (updateProp) {\r\n            res.json({ message: 'Accesorio actualizado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ messsage: 'No existe Accesorio a actualizar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const deletePropById = async(req, res) => {\r\n    const { propsId } = req.params;\r\n    try {\r\n        const deletedProp = await Props.findByIdAndDelete(propsId);\r\n        if (deletedProp) {\r\n            res.json({ message: 'Accesorio eliminado con éxito' });\r\n        } else {\r\n            res.status(404).json({ messsage: 'No existe Accesorio a eliminar' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(409).json({ message: err.message })\r\n    }\r\n}"],"mappings":"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"}