{"version":3,"sources":["../../src/controllers/seller.controller.js"],"names":["getSellers","req","res","Seller","find","sort","name","seller","length","json","status","message","console","log","getSellerById","sellerId","params","findById","getSellerBySucursal","sucursal","body","estatus","query","getSellerByName","findOne","where","createSeller","marca","document","telefono","email","empleado","newSeller","User","username","$in","foundEmployee","map","em","_id","save","sellerSaved","updateSellerById","findByIdAndUpdate","updateSeller","deleteSellerById","findByIdAndDelete","deletedSeller"],"mappings":"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","sourcesContent":["import Seller from '../models/Seller'\r\nimport User from '../models/User'\r\n\r\nexport const getSellers = async(req, res) => {\r\n    try {\r\n        const seller = await Seller.find().sort({ name: 'asc' });\r\n        if (seller.length > 0) {\r\n            res.json(seller);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Vendedores' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getSellerById = async(req, res) => {\r\n    const { sellerId } = req.params;\r\n    try {\r\n        const seller = await Seller.findById(sellerId);\r\n        if (seller) {\r\n            res.json(seller);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Vendedor' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n\r\n}\r\n\r\nexport const getSellerBySucursal = async(req, res) => {\r\n    const { sucursal } = req.body;\r\n    try {\r\n        const query = await Seller.find({ sucursal: sucursal, estatus: true }).sort({ name: 'asc' });\r\n\r\n        if (query.length > 0) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: `No existen Vendedores en ${sucursal}` });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(404).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const getSellerByName = async(req, res) => {\r\n    const { name } = req.body;\r\n    try {\r\n        const query = await Seller.findOne().where({ name });\r\n\r\n        if (query) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Vendedores con este Nombre' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(404).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const createSeller = async(req, res) => {\r\n    const { name, sucursal, marca, document, telefono, email, estatus, empleado } = req.body;\r\n    try {\r\n        const newSeller = new Seller({\r\n            name,\r\n            sucursal,\r\n            marca,\r\n            document,\r\n            telefono,\r\n            email,\r\n            estatus\r\n        });\r\n        const foundEmployee = await User.find({ username: { $in: empleado } });\r\n        newSeller.empleado = foundEmployee.map(em => em._id);\r\n        const sellerSaved = await newSeller.save();\r\n        if (sellerSaved) {\r\n            res.json({ message: 'Vendedor creado con éxito' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const updateSellerById = async(req, res) => {\r\n    const { sellerId } = req.params;\r\n    const { name, sucursal, marca, document, telefono, email, estatus, empleado } = req.body;\r\n    try {\r\n        const updateSeller = await Seller.findByIdAndUpdate(sellerId, {\r\n            name,\r\n            sucursal,\r\n            marca,\r\n            document,\r\n            telefono,\r\n            email,\r\n            estatus\r\n        });\r\n        if (updateSeller) {\r\n            res.json({ message: 'Vendedor actualizado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Vendedor a actualizar' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const deleteSellerById = async(req, res) => {\r\n    const { sellerId } = req.params;\r\n    try {\r\n        const deletedSeller = await Seller.findByIdAndDelete(sellerId);\r\n        if (deletedSeller) {\r\n            res.json({ message: 'Vendedor eliminado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Vendedor a eliminar' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}"],"file":"seller.controller.js"}