{"version":3,"sources":["../../src/controllers/seller.controller.js"],"names":["getSellers","req","res","Seller","find","sort","name","seller","length","json","status","message","console","log","getSellerById","sellerId","params","findById","getSellerBySucursal","sucursal","body","where","query","getSellerByName","findOne","createSeller","document","telefono","empleado","newSeller","User","username","$in","foundEmployee","map","em","_id","save","sellerSaved","updateSellerById","findByIdAndUpdate","updateSeller","deleteSellerById","findByIdAndDelete","deletedSeller"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AAEO,IAAMA,UAAU;AAAA,qFAAG,iBAAMC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEGC,gBAAOC,IAAP,GAAcC,IAAd,CAAmB;AAAEC,cAAAA,IAAI,EAAE;AAAR,aAAnB,CAFH;;AAAA;AAEZC,YAAAA,MAFY;;AAAA,kBAGdA,MAAM,CAACC,MAAP,GAAgB,CAHF;AAAA;AAAA;AAAA;;AAIdN,YAAAA,GAAG,CAACO,IAAJ,CAASF,MAAT;AAJc;AAAA;;AAAA;AAAA,6CAMPL,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CANO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AASlBC,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,YAAIA;AAAf,aAArB;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVX,UAAU;AAAA;AAAA;AAAA,GAAhB;;;;AAcA,IAAMc,aAAa;AAAA,sFAAG,kBAAMb,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AACjBa,YAAAA,QADiB,GACJd,GAAG,CAACe,MADA,CACjBD,QADiB;AAAA;AAAA;AAAA,mBAGAZ,gBAAOc,QAAP,CAAgBF,QAAhB,CAHA;;AAAA;AAGfR,YAAAA,MAHe;;AAAA,iBAIjBA,MAJiB;AAAA;AAAA;AAAA;;AAKjBL,YAAAA,GAAG,CAACO,IAAJ,CAASF,MAAT;AALiB;AAAA;;AAAA;AAAA,8CAOVL,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CAPU;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUrBC,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB;;AAXqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbG,aAAa;AAAA;AAAA;AAAA,GAAnB;;;;AAgBA,IAAMI,mBAAmB;AAAA,sFAAG,kBAAMjB,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AACvBiB,YAAAA,QADuB,GACVlB,GAAG,CAACmB,IADM,CACvBD,QADuB;AAAA;AAAA;AAAA,mBAGPhB,gBAAOC,IAAP,GAAciB,KAAd,CAAoB;AAAEF,cAAAA,QAAQ,EAARA;AAAF,aAApB,CAHO;;AAAA;AAGrBG,YAAAA,KAHqB;;AAAA,kBAKvBA,KAAK,CAACd,MAAN,GAAe,CALQ;AAAA;AAAA;AAAA;;AAMvBN,YAAAA,GAAG,CAACO,IAAJ,CAASa,KAAT;AANuB;AAAA;;AAAA;AAAA,8CAQhBpB,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CARgB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAW3BC,YAAAA,OAAO,CAACC,GAAR;AAX2B,8CAYpBX,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB,CAZoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAnBO,mBAAmB;AAAA;AAAA;AAAA,GAAzB;;;;AAgBA,IAAMK,eAAe;AAAA,sFAAG,kBAAMtB,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBI,YAAAA,IADmB,GACVL,GAAG,CAACmB,IADM,CACnBd,IADmB;AAAA;AAAA;AAAA,mBAGHH,gBAAOqB,OAAP,GAAiBH,KAAjB,CAAuB;AAAEf,cAAAA,IAAI,EAAJA;AAAF,aAAvB,CAHG;;AAAA;AAGjBgB,YAAAA,KAHiB;;AAAA,iBAKnBA,KALmB;AAAA;AAAA;AAAA;;AAMnBpB,YAAAA,GAAG,CAACO,IAAJ,CAASa,KAAT;AANmB;AAAA;;AAAA;AAAA,8CAQZpB,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CARY;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWvBC,YAAAA,OAAO,CAACC,GAAR;AAXuB,8CAYhBX,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB,CAZgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAfY,eAAe;AAAA;AAAA;AAAA,GAArB;;;;AAgBA,IAAME,YAAY;AAAA,sFAAG,kBAAMxB,GAAN,EAAWC,GAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACiCD,GAAG,CAACmB,IADrC,EAChBd,IADgB,aAChBA,IADgB,EACVa,QADU,aACVA,QADU,EACAO,QADA,aACAA,QADA,EACUC,QADV,aACUA,QADV,EACoBC,QADpB,aACoBA,QADpB;AAAA;AAGdC,YAAAA,SAHc,GAGF,IAAI1B,eAAJ,CAAW;AAAEG,cAAAA,IAAI,EAAJA,IAAF;AAAQa,cAAAA,QAAQ,EAARA,QAAR;AAAkBO,cAAAA,QAAQ,EAARA,QAAlB;AAA4BC,cAAAA,QAAQ,EAARA;AAA5B,aAAX,CAHE;AAAA;AAAA,mBAIQG,cAAK1B,IAAL,CAAU;AAAE2B,cAAAA,QAAQ,EAAE;AAAEC,gBAAAA,GAAG,EAAEJ;AAAP;AAAZ,aAAV,CAJR;;AAAA;AAIdK,YAAAA,aAJc;AAKpBJ,YAAAA,SAAS,CAACD,QAAV,GAAqBK,aAAa,CAACC,GAAd,CAAkB,UAAAC,EAAE;AAAA,qBAAIA,EAAE,CAACC,GAAP;AAAA,aAApB,CAArB;AALoB;AAAA,mBAMMP,SAAS,CAACQ,IAAV,EANN;;AAAA;AAMdC,YAAAA,WANc;;AAOpB,gBAAIA,WAAJ,EAAiB;AACbpC,cAAAA,GAAG,CAACO,IAAJ,CAAS;AAAEE,gBAAAA,OAAO,EAAE;AAAX,eAAT;AACH;;AATmB;AAAA;;AAAA;AAAA;AAAA;AAWpBC,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB;;AAZoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZc,YAAY;AAAA;AAAA;AAAA,GAAlB;;;;AAgBA,IAAMc,gBAAgB;AAAA,sFAAG,kBAAMtC,GAAN,EAAWC,GAAX;AAAA;;AAAA;AAAA;AAAA;AAAA;AACpBa,YAAAA,QADoB,GACPd,GAAG,CAACe,MADG,CACpBD,QADoB;AAAA,yBAE6Bd,GAAG,CAACmB,IAFjC,EAEpBd,IAFoB,cAEpBA,IAFoB,EAEda,QAFc,cAEdA,QAFc,EAEJO,QAFI,cAEJA,QAFI,EAEMC,QAFN,cAEMA,QAFN,EAEgBC,QAFhB,cAEgBA,QAFhB;AAAA;AAAA;AAAA,mBAIIE,cAAK1B,IAAL,CAAU;AAAE2B,cAAAA,QAAQ,EAAE;AAAEC,gBAAAA,GAAG,EAAEJ;AAAP;AAAZ,aAAV,CAJJ;;AAAA;AAIlBK,YAAAA,aAJkB;AAAA;AAAA,mBAKG9B,gBAAOqC,iBAAP,CAAyBzB,QAAzB,EAAmC;AAAET,cAAAA,IAAI,EAAJA,IAAF;AAAQa,cAAAA,QAAQ,EAARA,QAAR;AAAkBO,cAAAA,QAAQ,EAARA,QAAlB;AAA4BC,cAAAA,QAAQ,EAARA,QAA5B;AAAsCC,cAAAA,QAAQ,EAAEK,aAAa,CAACC,GAAd,CAAkB,UAAAC,EAAE;AAAA,uBAAIA,EAAE,CAACC,GAAP;AAAA,eAApB;AAAhD,aAAnC,CALH;;AAAA;AAKlBK,YAAAA,YALkB;;AAAA,iBAMpBA,YANoB;AAAA;AAAA;AAAA;;AAOpBvC,YAAAA,GAAG,CAACO,IAAJ,CAAS;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAAT;AAPoB;AAAA;;AAAA;AAAA,8CASbT,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CATa;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAYxBC,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB;;AAbwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhB4B,gBAAgB;AAAA;AAAA;AAAA,GAAtB;;;;AAiBA,IAAMG,gBAAgB;AAAA,sFAAG,kBAAMzC,GAAN,EAAWC,GAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AACpBa,YAAAA,QADoB,GACPd,GAAG,CAACe,MADG,CACpBD,QADoB;AAAA;AAAA;AAAA,mBAGIZ,gBAAOwC,iBAAP,CAAyB5B,QAAzB,CAHJ;;AAAA;AAGlB6B,YAAAA,aAHkB;;AAAA,iBAIpBA,aAJoB;AAAA;AAAA;AAAA;;AAKpB1C,YAAAA,GAAG,CAACO,IAAJ,CAAS;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAAT;AALoB;AAAA;;AAAA;AAAA,8CAObT,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE;AAAX,aAArB,CAPa;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAUxBC,YAAAA,OAAO,CAACC,GAAR;AACAX,YAAAA,GAAG,CAACQ,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,cAAAA,OAAO,EAAE,aAAIA;AAAf,aAArB;;AAXwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAhB+B,gBAAgB;AAAA;AAAA;AAAA,GAAtB","sourcesContent":["import Seller from '../models/Seller'\r\nimport User from '../models/User'\r\n\r\nexport const getSellers = async(req, res) => {\r\n    try {\r\n        const seller = await Seller.find().sort({ name: 'asc' });\r\n        if (seller.length > 0) {\r\n            res.json(seller);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Vendedores' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const getSellerById = async(req, res) => {\r\n    const { sellerId } = req.params;\r\n    try {\r\n        const seller = await Seller.findById(sellerId);\r\n        if (seller) {\r\n            res.json(seller);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Vendedor' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n\r\n}\r\n\r\nexport const getSellerBySucursal = async(req, res) => {\r\n    const { sucursal } = req.body;\r\n    try {\r\n        const query = await Seller.find().where({ sucursal });\r\n\r\n        if (query.length > 0) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Vendedores en esta Sucursal' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(404).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const getSellerByName = async(req, res) => {\r\n    const { name } = req.body;\r\n    try {\r\n        const query = await Seller.findOne().where({ name });\r\n\r\n        if (query) {\r\n            res.json(query);\r\n        } else {\r\n            return res.status(404).json({ message: 'No existen Vendedores con este Nombre' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        return res.status(404).json({ message: err.message });\r\n    }\r\n}\r\n\r\nexport const createSeller = async(req, res) => {\r\n    const { name, sucursal, document, telefono, empleado } = req.body;\r\n    try {\r\n        const newSeller = new Seller({ name, sucursal, document, telefono });\r\n        const foundEmployee = await User.find({ username: { $in: empleado } });\r\n        newSeller.empleado = foundEmployee.map(em => em._id);\r\n        const sellerSaved = await newSeller.save();\r\n        if (sellerSaved) {\r\n            res.json({ message: 'Vendedor creado con éxito' });\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const updateSellerById = async(req, res) => {\r\n    const { sellerId } = req.params;\r\n    const { name, sucursal, document, telefono, empleado } = req.body;\r\n    try {\r\n        const foundEmployee = await User.find({ username: { $in: empleado } });\r\n        const updateSeller = await Seller.findByIdAndUpdate(sellerId, { name, sucursal, document, telefono, empleado: foundEmployee.map(em => em._id) });\r\n        if (updateSeller) {\r\n            res.json({ message: 'Vendedor actualizado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Vendedor a actualizar' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}\r\n\r\nexport const deleteSellerById = async(req, res) => {\r\n    const { sellerId } = req.params;\r\n    try {\r\n        const deletedSeller = await Seller.findByIdAndDelete(sellerId);\r\n        if (deletedSeller) {\r\n            res.json({ message: 'Vendedor eliminado con éxito' });\r\n        } else {\r\n            return res.status(404).json({ message: 'No existe Vendedor a eliminar' })\r\n        }\r\n    } catch (err) {\r\n        console.log(err);\r\n        res.status(409).json({ message: err.message })\r\n    }\r\n}"],"file":"seller.controller.js"}